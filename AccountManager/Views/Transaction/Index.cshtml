@{
    ViewBag.Title = "Transaction List";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@section ScriptsOrCss
{

    <link href="~/Content/DataTable/new/dataTables.bootstrap.css" rel="stylesheet" type="text/css" />
    <script src="~/Content/DataTable/new/jquery.dataTables.min.js" type="text/javascript"></script>
    <script src="~/Content/DataTable/new/dataTables.buttons.min.js" type="text/javascript"></script>
    <script src="~/Content/DataTable/new/jszip.min.js" type="text/javascript"></script>
    <script src="~/Content/DataTable/new/pdfmake.min.js" type="text/javascript"></script>
    <script src="~/Content/DataTable/new/vfs_fonts.js" type="text/javascript"></script>
    <script src="~/Content/DataTable/new/buttons.html5.min.js" type="text/javascript"></script>
    <link href="~/Content/DataTable/new/jquery.dataTables.min.css" rel="stylesheet" type="text/css" />
    <link href="~/Content/DataTable/new/buttons.dataTables.min.css" rel="stylesheet" type="text/css" />
    <script src="~/Content/DataTable/new/buttons.print.min.js"></script>
    <script src="~/Content/DataTable/new/buttons.colVis.min.js"></script>
}
<section class="content-header">
    <h1>
        @ViewBag.Title
        @*<small> @ViewBag.Title</small>*@
    </h1>
</section>

<section class="content">
    <!-- Small boxes (Stat box) -->
    <div class="row">
        <div class="col-xs-12">
            <div class="box box-solid box-primary">

                <div class="box-body" style="height:100px;">
                    <!-- Split button -->
                    <div class="margin">
                        <div class=" ">
                            <div class="col-md-2">
                                <div class="row">
                                    <div class="col-md-8">
                                        <div class="form-group">
                                            <div class="btn-group">
                                                <label for="lblYearId"></label>
                                                <a href="~/Transaction/Create" class="btn btn-dropbox">Create New Ledger </a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="row">
                                    <div class="col-md-4">

                                        <div class="form-group">

                                            <label for="lblYearId"><b>Select Year:</b></label>
                                            
                                        </div>

                                    </div>
                                    <div class="col-md-8">

                                        <div class="form-group">
                                         
                                            <select class="form-control" id="YearId" name="YearId"></select>
                                        </div>

                                    </div>
                                </div>
                            </div>

                            <div class="col-md-4">
                                <div class="row">
                                    <div class="col-md-5">
                                        <div class="form-group">
                                            <label for="lblAccountholderId"><b>Select Account:</b></label>                                            
                                        </div>
                                    </div>
                                    <div class="col-md-7">
                                        <div class="form-group">                                          
                                            <select class="form-control" id="AccountholderId" name="AccountholderId"></select>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>






                    </div>

                    <!-- flat split buttons -->
                </div><!-- /.box-body -->
            </div>
            <div class="box box-solid box-primary">
                <div class="box-header">
                    <h3 class="box-title">@ViewBag.Title</h3>
                </div><!-- /.box-header -->
                <div class="box-body table-responsive">

                    <div class="margin">

                        <div class="streaming-table">
                            <span id="found" class="label label-info"></span>


                            <table id="tbTransaction" class="display nowrap">
                                <thead>
                                    <tr>
                                        <th>Actions</th>
                                        <th> Sl No.  </th>
                                        <th> Date </th>
                                        <th> Installment No.  </th>
                                        <th> Particulars  </th>
                                        <th> HireCharge   </th>

                                        <th> Debit Amount  </th>
                                        <th> Due Amount  </th>

                                        <th> Credit Amount  </th>
                                        <th> Balance Amount  </th>
                                        <th> Invoice Status  </th>

                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>

                            <div id="summary">
                                <div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>
</section>





<script type="text/javascript">

        $(document).ready(function () {
            var oTableTransaction = "";
            var ControlerNameTransaction = "@Url.Content("~/Transaction")";
            // debugger;
            oTableTransaction = $("#tbTransaction").DataTable({
                "bRetrieve": true,
                "bProcessing": true,
                "dom": 'lBfrtip',
                "sAjaxSource": "@Url.Content("~/Transaction/GetGrid")",
                "buttons": [
                    // { extend: 'copyHtml5', exportOptions: { columns: ':visible' } }
                    , { extend: 'excelHtml5', exportOptions: { columns: ':visible' } }
                    // ,{ extend: 'csvHtml5', exportOptions: { columns: ':visible' } }
                    , { extend: 'pdfHtml5', exportOptions: { columns: ':visible' } }
                    // ,{ extend: 'print', exportOptions: { columns: ':visible' } }
                    , 'colvis'
                ], columnDefs: [{ visible: false }],
                "pageLength": 10,
                "lengthMenu": [[5, 10, 25, 50, -1], [5, 10, 25, 50, "All"]],
                "aoColumns": [

                    {
                        "mRender": function (oObj, type, row) {

                            var buttons = '<div class="text-center"> <div class="btn-group text-left"> <button type="button" class="btn btn-default btn-xs btn-warning dropdown-toggle" data-toggle="dropdown">Action <span class="caret"></span></button>';
                            buttons += '<ul class="dropdown-menu pull-left" role="menu">';
                            buttons += '<li><a href="' + ControlerNameTransaction + "/MultiViewIndex/" + row[0] + '"><i class="fa fa-edit"></i> Edit</a></li>';

                            buttons += '<li><a href="' + ControlerNameTransaction + "/Details/" + row[0] + '" data-ajax-update="#SkDetails" data-ajax-success="openModalDialog(\'SkDetails\', \'Details\')" data-ajax-mode="replace" data-ajax-method="GET" data-ajax-failure="clearModalDialog(\'SkDetails\');alert(\'Ajax call failed\')" data-ajax-begin="prepareModalDialog(\'SkDetails\')" data-ajax="true"><i class="fa fa-info-circle"></i>Quick Details</a></li>';
                            buttons += '<li><a href="' + ControlerNameTransaction + "/Delete/" + row[0] + '" data-ajax-update="#SkDelete" data-ajax-success="openModalDialog(\'SkDelete\', \'Delete\')" data-ajax-mode="replace" data-ajax-method="GET" data-ajax-failure="clearModalDialog(\'SkDelete\');alert(\'Ajax call failed\')" data-ajax-begin="prepareModalDialog(\'SkDelete\')" data-ajax="true"><i class="fa fa-trash-o"></i> Delete</a></a></li>';

                            buttons += '</ul>';
                            buttons += '</div></div>';
                            return buttons;
                        }

                    }, {}
                    , {}
                    , {}
                    , {}
                    , {}
                    , {}
                    , {}
                    , {}
                    , {}
                    , {}


        ]

        });

        });
</script>

@*<script type="text/javascript">
        $(document).ready(function () {

            $.ajax({
                type: "GET",
                url: "/FinancialYear/getYear",
                dataType: "json",
                contentType: "application/json; charset=utf-8",

                success: function (res) {
                    $("#YearId").append($("<option></option>").val("1").html("2021"));
                    $("#YearId").append($("<option></option>").val("2").html("2022"));

                    //$.each(res, function (i, value) {
                    //    $("#YearId").append($("<option></option>").val(value[i].Value).html(value[i].Text));
                    //    console.log(value);
                    //})
                }
            });

            $.ajax({
                type: "GET", url: "AccountHolders/getallAccountholders", dataType: "json", contentType: "application/json", success: function (res) {
                    $("#AccountHolderId").append($("<option></option>").val("1").html("Mahesh"));
                    $("#AccountHolderId").append($("<option></option>").val("2").html("wewewe"));
                }

            });

        })

    </script>*@

<script type="text/javascript">
    $(document).ready(function () {
        $.ajax({
            type: "GET",
            url: "/FinancialYear/getYears",
            data: "{}",
            success: function (data) {
                var s = '<option value="-1">-Select-</option>';
                for (var i = 0; i < data.length; i++) {
                    s += '<option value="' + data[i].Text + '">' + data[i].Value + '</option>';
                }
                $("#YearId").html(s);
            }
        });
    });
</script>
<script type="text/javascript">
    $(document).ready(function () {
        $.ajax({
            type: "GET",
            url: "/Customers/getallAccountholders",
            data: "{}",
            success: function (data) {
                var s = '<option value="-1">-Select-</option>';
                for (var i = 0; i < data.length; i++) {
                    s += '<option value="' + data[i].Text + '">' + data[i].Value + '</option>';
                }
                $("#AccountholderId").html(s);
            }
        });
    });
</script> 